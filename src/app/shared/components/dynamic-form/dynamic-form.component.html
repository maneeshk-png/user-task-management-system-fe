<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div *ngFor="let field of fields" class="form-group">
      <label>{{ field.label }}</label>
  
      <input *ngIf="field.type==='text'||field.type==='password'" 
             [type]="field.type" 
             [formControlName]="field.name" 
             [placeholder]="field.placeholder||''" />
  
      <textarea *ngIf="field.type==='textarea'" [formControlName]="field.name"></textarea>
  
      <select *ngIf="field.type==='select'" [formControlName]="field.name">
        <option *ngFor="let opt of field.options" [value]="opt.value">{{ opt.label }}</option>
      </select>
  
      <div class="error" *ngIf="isInvalid(field)">
        {{ field.label }} is required
      </div>
    </div>
  
    <app-button type="submit" [disabled]="loading" [label]="loading ? 'Processing...' : submitLabel"></app-button>
  </form>
  